# 系统使用说明书

|   学号    | 姓名 |       邮箱        |
| :-------: | :--: | :---------------: |
| 191220156 | 张桓 | 2659428453@qq.com |

[TOC]

## 开发环境

* 操作系统：$Windows~10$

* 语言版本：$Python ~~3.9.7$​

* 所用IDE​​​​：$PyCharm ~~community ~~2021.2.1$

* 相关库版本：$PyQt5-5.15.4$， $numpy-1.21.2$， $matplotlib-3.4.3$， $pillow-8.3.2$

  

## 功能介绍

### 文件菜单

文件菜单布局和子功能位置如下图，需要时点击即可：

<img src="E:\md_image\image-20211126001209136.png" alt="image-20211126001209136" style="zoom: 67%;" />

#### 设置画笔

> 用来设置画笔的颜色以及粗细，布局如下：

<img src="E:\md_image\image-20211126001239848.png" alt="image-20211126001239848" style="zoom:67%;" />

**操作方式**：

点击设置画笔颜色后会弹出颜色对话框，选择需要的颜色即可，支持屏幕取色，自定义颜色以及输入颜色编码：

<img src="E:\md_image\image-20211125172541823.png" alt="image-20211125172541823" style="zoom: 50%;" />

选好颜色后点击OK，画笔颜色就设置成功了。

点击设置画笔宽度后会弹出一个输入框，画笔粗细支持范围为1到10，输入后点OK即可：

<img src="E:\md_image\image-20211126001407353.png" alt="image-20211126001407353" style="zoom:67%;" />

**操作结果**：

如图左边为蓝色宽度为1的画笔效果，中间为红色宽度为5的画笔效果，右边为绿色宽度为10的画笔效果：

<img src="E:\md_image\image-20211127202355985.png" alt="image-20211127202355985" style="zoom:50%;" />

#### 重置画布

> 清空画布上的所有内容，并且可以自定义新画布的尺寸。

**操作方式**：

点击该功能后会弹出重置画布对话框，可以滑块拖动也可以直接输入尺寸，点击OK即可：

<img src="E:\md_image\image-20211125172924642.png" alt="image-20211125172924642" style="zoom:67%;" />

**操作结果**：

重置前：

<img src="E:\md_image\image-20211125194921113.png" alt="image-20211125194921113" style="zoom:50%;" />

重置后：

<img src="E:\md_image\image-20211125194948571.png" alt="image-20211125194948571" style="zoom:50%;" />



#### 保存画布

> 保存当前画布为一张同样尺寸的图片，可以自定义存储路径和文件名称以及文件格式。

**操作方式**：

点击该功能后会弹出文件对话框，选择保存路径并输入文件名称，点击保存即可。

<img src="E:\md_image\image-20211125173910472.png" alt="image-20211125173910472" style="zoom: 50%;" />

**操作结果**：

绘制一个红色填充矩形和一个黄色填充五角星，保存画布得到图片`flag.bmp`如图：

<img src="E:\md_image\image-20211125195241284.png" alt="image-20211125195241284" style="zoom: 45%;" />

#### 退出

点击后退出绘图系统。



### 绘制菜单

绘制菜单布局和子功能位置如下图：

<img src="E:\md_image\image-20211125174210051.png" alt="image-20211125174210051" style="zoom: 67%;" />

#### 绘制线段

可以选择`Native`, `DDA`，`Bresenham`三种不同的算法绘制：

<img src="E:\md_image\image-20211125174308112.png" alt="image-20211125174308112" style="zoom: 67%;" />

**操作方式**：

在画布上按住鼠标（左键右键均可），表示线段起点，拖动到终点处释放鼠标，即可完成绘制。

**操作结果**：

从左到右依次是`Native`, `DDA`，`Bresenham`算法的绘制结果。

<img src="E:\md_image\image-20211125174625810.png" alt="image-20211125174625810" style="zoom: 67%;" />



#### 绘制多边形

可以选择`DDA`或者`Bresenham`算法绘制：

<img src="E:\md_image\image-20211125182044476.png" alt="image-20211125182044476" style="zoom:67%;" />

**操作方式**：

在画布上点击鼠标**左键**表示将该位置作为**多边形的顶点**，点击鼠标**右键结束绘制**。

​		因此绘制多边形时，应该按照**顺时针或者逆时针**依次用鼠标左键点击顶点，最后点击鼠标右键结束绘制即可。

**操作结果**：

绘制效果如图：

<img src="E:\md_image\image-20211125182622961.png" alt="image-20211125182622961" style="zoom:67%;" />

#### 绘制填充多边形

**操作方式**：

​		和绘制多边形完全一样，按照**顺时针或者逆时针**依次用鼠标左键点击顶点，最后点击鼠标右键结束绘制即可。==填充颜色就是画笔颜色==。

**操作结果**：

绘制效果如图：

<img src="E:\md_image\image-20211125195946951.png" alt="image-20211125195946951" style="zoom: 50%;" />

#### 绘制椭圆

**操作方式**：

​		按住鼠标（左键右键均可），表示椭圆矩形框的一个顶点，移动鼠标到其**对角线位置**释放鼠标，对角线段的两个端点将作为参数绘制出对应的椭圆。

**操作结果**：

<img src="E:\md_image\image-20211125183410904.png" alt="image-20211125183410904" style="zoom:67%;" />

#### 绘制曲线

可以选择绘制`Bezier`或者`B-spline`曲线：

<img src="E:\md_image\image-20211125183950870.png" alt="image-20211125183950870" style="zoom:67%;" />

**操作方式**：

在画布上点击鼠标**左键**表示将该位置作为**曲线的一个控制点**，点击鼠标**右键结束绘制**。

因此绘制时只需要依次用鼠标左键点击曲线控制点，最后点击鼠标右键结束即可。

==注意==：由于`B-spline`算法实现的是绘制三次均匀B样条曲线，**相邻四个点**才能构造出一条三次曲线。因此绘制B样条曲线时，如果还没点击好前三个控制点画布上将**不会显示内容**，第三个控制点点击完成才会显示出对应的B样条曲线。

**操作结果**：

如图上面两个为`Bezier`曲线，下面两个为`B`样条曲线：

<img src="E:\md_image\image-20211125185332770.png" alt="image-20211125185332770" style="zoom:67%;" />

### 编辑菜单

编辑菜单布局和子功能位置如下图：

<img src="E:\md_image\image-20211125185628450.png" alt="image-20211125185628450" style="zoom:67%;" />

如果需要进行图元变换，需要**首先**在窗口右侧的图元列表选中对应图元，否则会弹出警告框：

<img src="E:\md_image\image-20211125190045440.png" alt="image-20211125190045440" style="zoom: 50%;" />

即：**先**在右侧选择待变换图元，**再**在编辑菜单选择所需操作。

#### 平移操作

**操作方式**：

点击鼠标，然后按住拖动，图元将按照鼠标移动的向量平移。

**操作结果**：

平移前：

<img src="E:\md_image\image-20211125190415035.png" alt="image-20211125190415035" style="zoom:50%;" />

平移后：

<img src="E:\md_image\image-20211125190442464.png" alt="image-20211125190442464" style="zoom: 50%;" />

#### 旋转操作

**操作方式**：

点击鼠标，将该位置作为新的旋转中心。然后按照该中心可以选择两种方式进行旋转：

* 鼠标滚轮：下滑为顺时针旋转，上滑为逆时针旋转。

* 控制窗口：布局如下图所示：

  <img src="E:\md_image\image-20211125191014110.png" alt="image-20211125191014110" style="zoom:67%;" />

  可以直接**在对话框中修改**旋转中心以及旋转角度来使图元旋转。如果采用点击和滚轮操作，其旋转中心和旋转角度信息会**实时显示**在控制窗口中。

==注意==：椭圆不提供旋转操作，如果尝试对椭圆进行旋转会弹出警告框：

<img src="E:\md_image\image-20211125191542145.png" alt="image-20211125191542145" style="zoom:50%;" />

**操作结果**：

旋转前：

<img src="E:\md_image\image-20211125191311397.png" alt="image-20211125191311397" style="zoom:50%;" />

旋转后：

<img src="E:\md_image\image-20211125191358981.png" alt="image-20211125191358981" style="zoom:50%;" />



#### 缩放操作

**操作方式**：

点击鼠标，将该位置作为新的缩放中心。然后按照该中心可以选择两种方式进行缩放：

* 鼠标滚轮：下滑为缩小，上滑为放大。

* 控制窗口：布局如下图所示：

  <img src="E:\md_image\image-20211125191817897.png" alt="image-20211125191817897" style="zoom: 67%;" />

  可以直接**在对话框中修改**缩放中心以及缩放比例来使图元缩放。如果采用点击和滚轮操作，其缩放中心和缩放比例信息会**实时显示**在控制窗口中。

  

**操作结果**：

缩放前：

<img src="E:\md_image\image-20211125192112721.png" alt="image-20211125192112721" style="zoom:50%;" />

缩放后：

<img src="E:\md_image\image-20211125192126330.png" alt="image-20211125192126330" style="zoom:50%;" />

#### 删除操作

将选中的图元完全删除。

**操作结果**：

如图，将删除被选中的椭圆：

<img src="E:\md_image\image-20211125194426689.png" alt="image-20211125194426689" style="zoom:50%;" />

删除后，可以看到画布和右侧图元列表的该椭圆相关信息已经全部删除了：

<img src="E:\md_image\image-20211125194452060.png" alt="image-20211125194452060" style="zoom:50%;" />

#### 线段裁剪操作

可以选择`Cohen-Sutherland`或者`Liang-Barsky`两种算法来进行线段裁剪：

<img src="E:\md_image\image-20211127200551301.png" alt="image-20211127200551301" style="zoom:67%;" />

**操作方式**：
		选中线段后，点击鼠标作为裁剪框的一个顶点，拖动鼠标将绘制出绿色的裁剪框，松开鼠标后，线段将**只保留裁剪框内的部分**，如果线段完全在裁剪框外，那么这条线段将被**完全删除**。

<img src="E:\md_image\image-20211125192957390.png" alt="image-20211125192957390" style="zoom: 50%;" />

==注意==：由于线段裁剪算法只针对线段，因此如果尝试对其他类型图元进行裁剪操作会弹出警告框：

<img src="E:\md_image\image-20211127200926705.png" alt="image-20211127200926705" style="zoom: 50%;" />

**操作结果**：

裁剪前（此时还没有松开鼠标），可以清楚看到绿色的裁剪框：

<img src="E:\md_image\image-20211125193736222.png" alt="image-20211125193736222" style="zoom:50%;" />

裁剪后，在上图的基础上释放鼠标，将只保留裁剪框内的部分线段：

<img src="E:\md_image\image-20211125194102810.png" alt="image-20211125194102810" style="zoom:50%;" />

#### 多边形裁剪操作

**操作方式**：

​		操作方法和线段裁剪一致：选中多边形后，点击鼠标作为裁剪框的一个顶点，拖动鼠标将绘制出绿色的裁剪框，松开鼠标后，多边形将**只保留裁剪框内的部分**，如果多边形完全在裁剪框外，那么该多边形将被**完全删除**。

​		==填充多边形也可以被裁剪！！！==

==注意==：由于多边形裁剪算法只针对多边形，因此如果尝试对其他类型图元进行裁剪操作会弹出警告框：

<img src="E:\md_image\image-20211127201031564.png" alt="image-20211127201031564" style="zoom:50%;" />

**操作结果**：

裁剪前，左边为普通多边形，右边为填充多边形：

<img src="E:\md_image\image-20211127201356037.png" alt="image-20211127201356037" style="zoom: 50%;" />

将他们的角全部用矩形裁剪框裁剪掉后，得到：

<img src="E:\md_image\image-20211127201458972.png" alt="image-20211127201458972" style="zoom:50%;" />

